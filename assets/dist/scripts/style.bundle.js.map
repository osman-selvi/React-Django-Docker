{"version":3,"names":[],"mappings":"","sources":["style.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n!function (e) {\n  function t(i) {\n    if (n[i]) return n[i].exports;\n    var r = n[i] = {\n      exports: {},\n      id: i,\n      loaded: !1\n    };\n    return e[i].call(r.exports, r, r.exports, t), r.loaded = !0, r.exports;\n  }\n\n  var n = {};\n  return t.m = e, t.c = n, t.p = \"\", t(0);\n}([function (e, t, n) {\n  \"use strict\";\n\n  var i = n(7),\n      r = n(11),\n      o = n(12),\n      a = n(15),\n      s = n(16);\n  r.ready(function () {\n    console.log(\"square grid is here!\");\n    var e = JSON.parse(i[\"default\"].byId(\"square-grid-json\").innerHTML),\n        t = [];\n    e.overlay_enabled && (t.push(a.bind()), t.push(s.bind())), o[\"default\"](e, t, function (t) {\n      e.overlay_enabled && a.bindEvents(t);\n    });\n  });\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i(e, t) {\n    return function (n, i) {\n      for (var r = i.target; r && r !== n;) {\n        if (u.matchesSelector(r, e)) return t.call(this, r, i);\n        r = r.parentElement;\n      }\n    };\n  }\n\n  function r(e, t, n) {\n    var i = this,\n        r = function r(t) {\n      return n.call(i, e, t);\n    };\n\n    return e.addEventListener(t, r), {\n      release: function release() {\n        return e.removeEventListener(t, r);\n      }\n    };\n  }\n\n  function o(e, t, n) {\n    return i = l(t, n), t = i[0], n = i[1], r(e, t, n);\n    var i;\n  }\n\n  function a(e, t, n, o) {\n    return a = l(t, o), t = a[0], o = a[1], r(e, t, i(n, o));\n    var a;\n  }\n\n  var s = this,\n      u = n(2),\n      c = function c(e) {\n    return function (t, n) {\n      var i = n.relatedTarget;\n      i && (i === t || t.contains(i)) || e.call(s, t, n);\n    };\n  },\n      l = function l(e, t) {\n    return \"mouseenter\" === e || \"mouseleave\" === e ? [\"mouse\" + (\"mouseenter\" === e ? \"over\" : \"out\"), c(t)] : [e, t];\n  };\n\n  t.addEvent = o, t.mapEvent = a;\n}, function (e, t) {\n  \"use strict\";\n\n  var n = document.documentElement,\n      i = n.matches || n.webkitMatchesSelector || n.msMatchesSelector;\n\n  t.matchesSelector = function (e, t) {\n    return i.call(e, t);\n  };\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i() {}\n\n  var r = n(4),\n      o = n(5),\n      a = n(6),\n      s = 1e4,\n      u = 6,\n      c = function () {\n    function e(e) {\n      this.load = \"\", this.timeout = e, this.$state = \"IDLE\";\n    }\n\n    return e.prototype.isReady = function () {\n      return \"IDLE\" == this.$state;\n    }, e.prototype.loadImg = function (e, t) {\n      this.$state = \"LOADING\";\n      var n = document.createElement(\"img\");\n      n.onload = this.onLoad.bind(this, n, Date.now(), t), n.onerror = this.onError.bind(this, t), this.observe(t), n.src = this.load = e;\n    }, e.prototype.cleanup = function () {\n      this.$state = \"IDLE\", clearTimeout(this.wait);\n    }, e.prototype.observe = function (e) {\n      this.wait = setTimeout(function () {\n        this.cleanup.bind(this), e();\n      }.bind(this), this.timeout);\n    }, e.prototype.onLoad = function (e, t, n) {\n      e.onload = i, e.onerror = i, this.time = Date.now() - t, this.cleanup(), n(e);\n    }, e.prototype.onError = function (e) {\n      this.cleanup(), e();\n    }, e;\n  }(),\n      l = function () {\n    function e(e) {\n      this.$update = e, this.$store = {}, this.$queue = [], this.$times = [], this.$workers = [], this.addWorker();\n    }\n\n    return e.prototype.addWorker = function () {\n      this.$workers.push(new c(s));\n    }, e.prototype.expandPool = function () {\n      r.reduce(function (e, t) {\n        return t.isReady() ? e + 1 : e;\n      }, 0, this.$workers) < 2 && h(this.$times) < 1e3 && (this.addWorker(), this.$workers.length === u && (this.expandPool = function () {}));\n    }, e.prototype.findWorker = function () {\n      var e = r.find(function (e) {\n        return e.isReady();\n      }, this.$workers);\n      if (e instanceof o.Just) return e.value;\n    }, e.prototype.inStore = function (e) {\n      return e in this.$store;\n    }, e.prototype.inProgress = function (e) {\n      return r.find(function (t) {\n        return t.load === e;\n      }, this.$workers) instanceof o.Just;\n    }, e.prototype.load = function (e) {\n      var t = e.src;\n      if (this.inStore(t)) return this.$update(e, this.$store[t]), !0;\n      if (this.inProgress(t)) return !0;\n      var n = this.findWorker();\n      return n instanceof c && (this.loadImg(n, e), !0);\n    }, e.prototype.loadImg = function (e, t) {\n      var n = this;\n      e.loadImg(t.src, function (i) {\n        i && (n.$store[t.src] = i, n.$update(t, i), n.$times.push(e.time), n.expandPool()), n.next();\n      });\n    }, e.prototype.next = function () {\n      this.$queue.length && this.load(this.$queue[0]) && (this.$queue.shift(), setTimeout(this.next.bind(this), 0));\n    }, e.prototype.run = function (e) {\n      this.$queue = e.slice(), this.next();\n    }, e;\n  }(),\n      d = new a[\"default\"](),\n      f = new l(d.fire.bind(d)),\n      h = function h(e) {\n    return r.reduce(function (e, t) {\n      return e + t;\n    }, 0, e) / e.length;\n  };\n\n  t.bind = d.bind.bind(d), t.load = f.run.bind(f);\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i(e, t) {\n    for (var n = 0; n < t.length; n++) {\n      e(t[n], n);\n    }\n  }\n\n  function r(e, t, n) {\n    return i(function (n, i) {\n      return t = e(t, n, i);\n    }, n), t;\n  }\n\n  function o(e, t) {\n    return r(function (t, n) {\n      return t.concat(e(n));\n    }, [], t);\n  }\n\n  function a(e, t) {\n    for (var n = 0; n < t.length; n++) {\n      var i = t[n];\n      if (1 == e(i)) return [i, n];\n    }\n  }\n\n  function s(e, t) {\n    var n = a(e, t);\n    return Array.isArray(n) ? new c.Just(n[1]) : new c.Nothing();\n  }\n\n  function u(e, t) {\n    var n = a(e, t);\n    return Array.isArray(n) ? new c.Just(n[0]) : new c.Nothing();\n  }\n\n  var c = n(5);\n  t.each = i, t.reduce = r, t.map = o, t.filter = function (e, t) {\n    return r(function (t, n) {\n      return e(n) ? t.concat(n) : t;\n    }, [], t);\n  }, t.findIndex = s, t.find = u;\n}, function (e, t) {\n  \"use strict\";\n\n  var n = function () {\n    function e(e) {\n      this.value = e;\n    }\n\n    return e.prototype.bind = function (e) {\n      return e(this.value);\n    }, e;\n  }();\n\n  t.Just = n;\n\n  var i = function () {\n    function e() {}\n\n    return e.prototype.bind = function () {\n      return this;\n    }, e;\n  }();\n\n  t.Nothing = i;\n}, function (e, t, n) {\n  \"use strict\";\n\n  var i = n(4),\n      r = {},\n      o = 0,\n      a = function () {\n    function e() {\n      this.$bindings = [];\n    }\n\n    return e.prototype.bind = function (e) {\n      var t = \"em-\" + o++;\n      return this.$bindings.push({\n        cid: t,\n        binding: e\n      }), {\n        release: this.$release.bind(this, t)\n      };\n    }, e.prototype.fire = function () {\n      for (var e = [], t = 0; t < arguments.length; t++) {\n        e[t] = arguments[t];\n      }\n\n      i.each(function (t) {\n        var n = t.binding;\n        return n.apply(r, e);\n      }, this.$bindings);\n    }, e.prototype.$release = function (e) {\n      this.$bindings = i.filter(function (t) {\n        return t.cid !== e;\n      }, this.$bindings);\n    }, e;\n  }();\n\n  Object.defineProperty(t, \"__esModule\", {\n    value: !0\n  }), t[\"default\"] = a;\n}, function (e, t, n) {\n  \"use strict\";\n\n  var i = n(8),\n      r = \"getComputedStyle\" in window ? \"getComputedStyle\" : \"currentStyle\",\n      o = document,\n      a = {\n    $: function $(e, t) {\n      return void 0 === t && (t = o), t.querySelectorAll(e);\n    },\n    byId: function byId(e, t) {\n      return void 0 === t && (t = o), t.getElementById(e);\n    },\n    getStyle: function getStyle(e, t) {\n      return window[r](e)[t];\n    },\n    height: function height(e) {\n      return e.offsetHeight;\n    },\n    width: function width(e) {\n      return e.offsetWidth;\n    },\n    addClass: function addClass(e, t) {\n      return e.classList.add(t);\n    },\n    hasClass: function hasClass(e, t) {\n      return e.classList.contains(t);\n    },\n    removeClass: function removeClass(e, t) {\n      return e.classList.remove(t);\n    }\n  };\n  a.size = function (e) {\n    return {\n      width: a.width(e),\n      height: a.height(e)\n    };\n  }, a.offset = function (e) {\n    var t = e.getBoundingClientRect(),\n        n = document.documentElement;\n    return {\n      top: t.top + window.pageYOffset - n.clientTop,\n      left: t.left + window.pageXOffset - n.clientLeft\n    };\n  }, a.rect = function (e) {\n    return i.extend(a.offset(e), {\n      width: a.width(e),\n      height: a.height(e)\n    });\n  }, Object.defineProperty(t, \"__esModule\", {\n    value: !0\n  }), t[\"default\"] = a;\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i(e) {\n    for (var t = [], n = 1; n < arguments.length; n++) {\n      t[n - 1] = arguments[n];\n    }\n\n    return o.each(function (t) {\n      for (var n in t) {\n        t.hasOwnProperty(n) && (e[n] = t[n]);\n      }\n    }, t), e;\n  }\n\n  function r(e) {\n    var t,\n        n = Object.keys(e),\n        i = n.length;\n    return function (r) {\n      if (r === e) return !0;\n\n      for (var o = 0; o < i; o++) {\n        if (t = n[o], r[t] !== e[t]) return !1;\n      }\n\n      return !0;\n    };\n  }\n\n  var o = n(4);\n  t.extend = i, t.pick = function (e) {\n    for (var t = [], n = 1; n < arguments.length; n++) {\n      t[n - 1] = arguments[n];\n    }\n\n    return o.reduce(function (t, n) {\n      return n in e && (t[n] = e[n]), t;\n    }, {}, t);\n  }, t.where = r;\n}, function (e, t) {\n  \"use strict\";\n\n  function n(e, n, i) {\n    for (var r = [t.normalize(e, i)], o = 0, a = 0, s = 0, u = 0; o < n; o++) {\n      o % 2 ? (a = ++s, r.push(t.normalize(e - a, i))) : (a = ++u, r.push(t.normalize(e + a, i)));\n    }\n\n    return r.slice(0, Math.min(n + 1, i));\n  }\n\n  t.normalize = function (e, t) {\n    return (t + e) % t;\n  }, t.slice = n;\n},, function (e, t, n) {\n  \"use strict\";\n\n  function i() {\n    a.each(function (e) {\n      return e();\n    }, u), u = [], a.each(function (e) {\n      return e.release();\n    }, c), c = [];\n  }\n\n  function r(e) {\n    return \"loading\" !== document.readyState ? setTimeout(e, 0) : (u.push(e), void (s || (s = !0, c.push(o.addEvent(document, \"DOMContentLoaded\", i)), c.push(o.addEvent(window, \"load\", i)))));\n  }\n\n  var o = n(1),\n      a = n(4),\n      s = !1,\n      u = [],\n      c = [];\n  t.ready = r;\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i(e, t, n) {\n    var i = [];\n    return o.each(function (e) {\n      var r = e.update(t[e.id], n),\n          o = r[0],\n          a = r[1];\n      t[e.id] = o, i.push(a);\n    }, e), [t, i];\n  }\n\n  function r(e, t, n) {\n    var r = window.pageYOffset,\n        f = a[\"default\"].byId(\"square-grid-container\");\n    t.unshift(l.bind());\n    var h = o.reduce(function (t, n) {\n      return n.initialModel(e, f, t);\n    }, {}, t),\n        p = u.start(h, i.bind(d, t));\n    c.bind(function (e, t) {\n      var n = e.id,\n          i = e.src;\n      return p({\n        ctor: \"PlaceImg\",\n        id: n,\n        src: i,\n        img: t\n      });\n    }), n(p), s.addEvent(window, \"resize\", p.bind(d, {\n      ctor: \"Resize\"\n    })), s.addEvent(window, \"scroll\", function () {\n      window.pageYOffset !== r && p({\n        ctor: \"Scroll\"\n      }), r = window.pageYOffset;\n    }), p({\n      ctor: \"Resize\"\n    }), p({\n      ctor: \"Scroll\"\n    });\n  }\n\n  var o = n(4),\n      a = n(7),\n      s = n(1),\n      u = n(13),\n      c = n(3),\n      l = n(14),\n      d = {};\n  Object.defineProperty(t, \"__esModule\", {\n    value: !0\n  }), t[\"default\"] = r;\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i(e, t) {\n    e instanceof u && t(e.task()), e instanceof c && e.runTask(t);\n  }\n\n  function r(e, t) {\n    a.each(function (e) {\n      Array.isArray(e) ? a.each(function (e) {\n        return i(e, t);\n      }, e) : i(e, t);\n    }, e);\n  }\n\n  function o(e, t) {\n    return function n(i) {\n      var o = t(e, i),\n          a = o[0],\n          s = o[1];\n      e = a, r(s, n);\n    };\n  }\n\n  var a = n(4),\n      s = function () {\n    function e() {}\n\n    return e;\n  }(),\n      u = function () {\n    function e(e) {\n      this.task = e;\n    }\n\n    return e;\n  }(),\n      c = function () {\n    function e(e) {\n      this.task = e;\n    }\n\n    return e.prototype.runTask = function (e) {\n      this.task(e);\n    }, e;\n  }();\n\n  t.noEffect = new s(), t.asyncTask = function (e) {\n    return new c(e);\n  }, t.task = function (e) {\n    return new u(e);\n  }, t.start = o;\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i(e, t) {\n    var n = g(e, t);\n    return [Math.min(t.max_width, t.max_width * n), Math.min(t.max_height, t.max_height * n)];\n  }\n\n  function r(e, t) {\n    var n = i(e, t),\n        r = n[0],\n        o = n[1];\n    t.width = r, t.height = o;\n    var a = c[\"default\"].rect(t.el);\n    t.x1 = a.left, t.y1 = a.top, t.y2 = a.top + a.height;\n  }\n\n  function o(e, t) {\n    return e.removeAttribute(\"srcSet\"), e.classList.remove(\"fouc\"), e.classList.remove(\"-no-srcset\"), e.src = t, {\n      ctor: \"NoOp\"\n    };\n  }\n\n  function a(e, t) {\n    var n = l.find(function (e) {\n      return e.id == t.id;\n    }, e.items);\n\n    if (n instanceof d.Just) {\n      var i = n.value;\n      if (i.img.src !== t.src) return p.task(o.bind(m, i.img, t.src));\n    }\n\n    return p.noEffect;\n  }\n\n  function s(e, t, n) {\n    return n.grid = {\n      columns: e.columns,\n      containerEl: t,\n      items: l.reduce(function (e, n) {\n        return l.reduce(function (e, t) {\n          return l.reduce(function (e, i) {\n            return e.concat(f.extend(n, {\n              el: t,\n              img: i\n            }));\n          }, e, c[\"default\"].$(\"img\", t));\n        }, e, c[\"default\"].$('li[data-id=\"' + n.id + '\"]', t));\n      }, [], e.items),\n      tileSize: 0\n    }, n;\n  }\n\n  function u() {\n    return {\n      id: \"grid\",\n      update: w,\n      initialModel: s\n    };\n  }\n\n  var c = n(7),\n      l = n(4),\n      d = n(5),\n      f = n(8),\n      h = n(3),\n      p = n(13),\n      m = {},\n      g = function g(e, t) {\n    var n = t.highlighted,\n        i = t.zoom,\n        r = t.max_height,\n        o = t.max_width;\n    return (n ? 2 : 1) * e / (Math.min(r, o) * i);\n  },\n      v = function v(e) {\n    var t = c[\"default\"].width(e.containerEl) / e.columns;\n    return e.tileSize = t, l.each(r.bind(m, t), e.items), [e, [b(e), p.task(y.bind(m, t, e.items))]];\n  },\n      y = function y(e, t) {\n    return l.each(function (t) {\n      var n = t.x,\n          i = t.y,\n          r = t.width,\n          o = t.height,\n          a = t.highlighted,\n          s = t.img,\n          u = e * (a ? 2 : 1);\n      s.style.left = -n * (r - u) + \"px\", s.style.top = -i * (o - u) + \"px\", s.width = r, s.height = o;\n    }, t), {\n      ctor: \"NoOp\"\n    };\n  },\n      _ = function _(e, t, n) {\n    var i = Math.min(e.max_width, g(n, e) * e.max_width) / e.max_width,\n        r = Math.ceil(5 * i) / 5;\n    return {\n      id: e.id,\n      delta: t,\n      x: e.x1,\n      src: [e.src, [\"w=\" + e.max_width * r, \"h=\" + e.max_height * r].join(\"&\")].join(\"?\")\n    };\n  },\n      b = function b(e) {\n    return p.task(function () {\n      var t = window.pageYOffset,\n          n = c[\"default\"].rect(e.containerEl),\n          i = Math.max(n.top, t),\n          r = Math.min(t + window.innerHeight, n.top + n.height);\n      return h.load(l.reduce(function (t, n) {\n        return n.y1 < i && r > n.y1 || n.y2 >= i && n.y1 <= r || i < n.y2 && r > n.y2 ? t.concat(_(n, Math.abs(i - n.y1), e.tileSize)) : t;\n      }, [], e.items).sort(function (e, t) {\n        return e.delta == t.delta ? e.x - t.x : e.delta - t.delta;\n      })), {\n        ctor: \"NoOp\"\n      };\n    });\n  };\n\n  t.initialModel = s;\n\n  var w = function w(e, t) {\n    return \"Resize\" === t.ctor ? v(e) : \"Scroll\" === t.ctor ? [e, b(e)] : \"PlaceImg\" === t.ctor ? [e, a(e, t)] : [e, p.noEffect];\n  };\n\n  t.bind = u;\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i() {\n    var e = p[\"default\"].$(\".slide.active\")[0],\n        t = p[\"default\"].size(e),\n        n = t.height,\n        i = t.width,\n        r = parseFloat(p[\"default\"].getStyle(e, \"paddingBottom\"));\n    return {\n      height: n - r,\n      width: i,\n      ratio: n / i\n    };\n  }\n\n  function r(e) {\n    return e.canvas = i(), [e, _.task(function () {\n      return s(e.canvas, e.items), {\n        ctor: \"NoOp\"\n      };\n    })];\n  }\n\n  function o(e, t) {\n    return e.current = t, u(t, e.items), [e, _.task(function () {\n      return {\n        ctor: \"Transition.ShowSlide\",\n        active: e.current\n      };\n    })];\n  }\n\n  function a(e, t) {\n    var n = v.find(function (t) {\n      return e.id == t.id;\n    }, t);\n\n    if (n instanceof g.Just) {\n      var i = n.value;\n      i.figEl.classList.remove(\"loading\"), i.imgEl.src = e.img.src;\n    }\n\n    return {\n      ctor: \"NoOp\"\n    };\n  }\n\n  function s(e, t) {\n    v.each(function (t) {\n      var n = e.width,\n          i = t.max_height / t.max_width;\n      i > e.ratio && (n = e.height * (1 / i)), t.figEl.style.width = Math.min(t.max_width, n) + \"px\";\n    }, t);\n  }\n\n  function u(e, t) {\n    b.load(v.map(function (e) {\n      return y.pick(t[e], \"id\", \"src\");\n    }, w.slice(e, E, t.length)));\n  }\n\n  function c(e) {\n    var t = e.current,\n        n = e.canvas,\n        i = e.containerEl,\n        r = e.items;\n    return i.classList.add(\"active\"), u(t, r), s(n, r), {\n      ctor: \"Transition.Initialize\",\n      current: t\n    };\n  }\n\n  function l(e) {\n    return e.active = !1, p[\"default\"].removeClass(e.containerEl, \"active\"), e;\n  }\n\n  function d(e, t) {\n    console.log(\"SHOW OVERLAY\"), e.active = !0;\n    var n = v.findIndex(function (e) {\n      return e.id == t.id;\n    }, e.items);\n    return n instanceof g.Just && (e.current = n.value), v.each(function (t, n) {\n      n == e.current ? x.activateEl(t.slideEl) : x.deactivateEl(t.slideEl);\n    }, e.items), e.containerEl.classList.add(\"active\"), e.canvas = i(), [e, _.task(c.bind(S, e))];\n  }\n\n  function f(e, t, n) {\n    var i = p[\"default\"].byId(\"overlay\"),\n        r = {\n      width: 0,\n      height: 0,\n      ratio: 0\n    };\n    return n.overlay = {\n      active: !1,\n      canvas: r,\n      current: 0,\n      containerEl: i,\n      items: v.map(function (e) {\n        return v.reduce(function (t, n) {\n          return v.reduce(function (t, i) {\n            return v.reduce(function (t, r) {\n              return y.extend({\n                slideEl: n,\n                figEl: i,\n                imgEl: r\n              }, y.pick(e, \"id\", \"src\", \"max_width\", \"max_height\"));\n            }, t, p[\"default\"].$(\"div.fig > div > img\", n));\n          }, t, p[\"default\"].$(\"div.fig\", n));\n        }, {}, p[\"default\"].$('li[data-id=\"' + e.id + '\"]', i));\n      }, e.items)\n    }, n;\n  }\n\n  function h(e) {\n    var t = {\n      sX: 0,\n      sY: 0,\n      eX: 0,\n      eY: 0\n    },\n        n = 30,\n        i = 30,\n        r = 50,\n        o = 60,\n        a = \"\";\n    m.mapEvent(document, \"touchstart\", \".slide\", function (e, n) {\n      var i = n.touches[0];\n      t.sX = i.screenX, t.sY = i.screenY;\n    }), m.mapEvent(document, \"touchmove\", \".slide\", function (e, n) {\n      var i = n.touches[0];\n      t.eX = i.screenX, t.eY = i.screenY;\n    }), m.mapEvent(document, \"touchend\", \".slide\", function () {\n      (t.eX - n > t.sX || t.eX + n < t.sX) && t.eY < t.sY + o && t.sY > t.eY - o && t.eX > 0 ? a = t.eX > t.sX ? \"r\" : \"l\" : (t.eY - r > t.sY || t.eY + r < t.sY) && t.eX < t.sX + i && t.sX > t.eX - i && t.eY > 0 && (a = t.eY > t.sY ? \"d\" : \"u\"), \"\" != a && (\"r\" == a ? e({\n        ctor: \"ShowNextSlide\"\n      }) : \"l\" == a && e({\n        ctor: \"ShowPreviousSlide\"\n      })), a = \"\", t.sX = 0, t.sY = 0, t.eX = 0, t.eY = 0;\n    }), m.mapEvent(document, \"click\", \"#overlay li[data-id] .share a\", function (e, t) {\n      t.stopImmediatePropagation(), t.stopPropagation();\n    }), m.mapEvent(p[\"default\"].byId(\"square-grid-container\"), \"click\", \"#square-grid-container li[data-id]\", function (t) {\n      e({\n        ctor: \"Show\",\n        id: Number(t.getAttribute(\"data-id\"))\n      });\n    }), m.mapEvent(document, \"click\", \"#overlay li[data-id]\", function () {\n      e({\n        ctor: \"ShowNextSlide\"\n      });\n    }), m.mapEvent(document, \"click\", \"#overlay .close\", function () {\n      e({\n        ctor: \"Exit\"\n      });\n    }), m.mapEvent(document, \"click\", \"#overlay .navigation .forward\", function (t, n) {\n      n.preventDefault(), e({\n        ctor: \"ShowNextSlide\"\n      });\n    }), m.mapEvent(document, \"click\", \"#overlay .navigation .backward\", function (t, n) {\n      n.preventDefault(), e({\n        ctor: \"ShowPreviousSlide\"\n      });\n    }), m.addEvent(document, \"keydown\", function (t, n) {\n      var i = n.which;\n      return [37, 39].indexOf(i) > -1 ? e(37 == i ? {\n        ctor: \"ShowPreviousSlide\"\n      } : {\n        ctor: \"ShowNextSlide\"\n      }) : 27 === i ? e({\n        ctor: \"Exit\"\n      }) : void 0;\n    });\n  }\n\n  var p = n(7),\n      m = n(1),\n      g = n(5),\n      v = n(4),\n      y = n(8),\n      _ = n(13),\n      b = n(3),\n      w = n(9),\n      x = n(16),\n      E = 9,\n      S = {},\n      A = function A(e, t, n) {\n    return (2 * n + (e + t)) % n;\n  },\n      C = function C(e, t) {\n    return \"Show\" === t.ctor ? d(e, t) : e.active === !0 ? \"Exit\" === t.ctor ? [l(e), _.noEffect] : \"ShowPreviousSlide\" === t.ctor ? o(e, A(e.current, -1, e.items.length)) : \"ShowNextSlide\" === t.ctor ? o(e, A(e.current, 1, e.items.length)) : \"PlaceImg\" === t.ctor ? [e, _.task(a.bind(S, t, e.items))] : \"Resize\" === t.ctor ? r(e) : [e, _.noEffect] : [e, _.noEffect];\n  };\n\n  t.bindEvents = h, t.bind = function () {\n    return {\n      id: \"overlay\",\n      update: C,\n      initialModel: f\n    };\n  };\n}, function (e, t, n) {\n  \"use strict\";\n\n  function i() {}\n\n  function r(e) {\n    p[\"default\"].removeClass(e, \"not-active\"), p[\"default\"].addClass(e, \"active\");\n  }\n\n  function o(e) {\n    p[\"default\"].removeClass(e, \"active\"), p[\"default\"].addClass(e, \"not-active\");\n  }\n\n  function a(e, t) {\n    e.state = \"TRANSITIONING\";\n    var n = h.asyncTask(function (n) {\n      var i = {\n        ctor: \"Deactivated\",\n        el: t\n      };\n      e.binding = m.addEvent(t, \"transitionend\", function () {\n        return n(i);\n      }), p[\"default\"].removeClass(t, \"active\");\n    });\n    return [e, n];\n  }\n\n  function s(e, t) {\n    e.state = \"TRANSITIONING\";\n    var n = h.asyncTask(function (n) {\n      var i = {\n        ctor: \"Activated\",\n        intended: e.intended,\n        el: t\n      };\n      e.binding = m.addEvent(t, \"transitionend\", function () {\n        return n(i);\n      }), p[\"default\"].addClass(t, \"active\");\n    });\n    return p[\"default\"].removeClass(t, \"not-active\"), t.offsetHeight, [e, n];\n  }\n\n  function u(e, t) {\n    return t.el.classList.add(\"not-active\"), e.binding.release(), e.binding.release = i, s(e, e.slides[e.intended]);\n  }\n\n  function c(e, t) {\n    return e.binding.release(), e.binding.release = i, t.intended !== e.intended ? a(e, t.el) : (e.current = e.intended, e.state = \"ACTIVATED\", [e, h.noEffect]);\n  }\n\n  function l(e, t) {\n    return e.intended = t.active, e.fade ? \"ACTIVATED\" === e.state ? a(e, e.slides[e.current]) : [e, h.noEffect] : (o(e.slides[e.current]), r(e.slides[e.intended]), e.current = t.active, [e, h.noEffect]);\n  }\n\n  function d(e, t) {\n    var n = t.current;\n    return e.current = n, e.intended = n, e.state = \"ACTIVATED\", e.binding.release(), e.binding.release = i, [e, h.noEffect];\n  }\n\n  function f(e, t, n) {\n    return n.transition = {\n      current: 0,\n      binding: {\n        release: i\n      },\n      fade: e.overlay_transition_enabled,\n      intended: 0,\n      slides: p[\"default\"].$(\"#overlay .slide\"),\n      state: \"ACTIVATED\"\n    }, n;\n  }\n\n  var h = n(13),\n      p = n(7),\n      m = n(1);\n  t.activateEl = r, t.deactivateEl = o;\n\n  var g = function g(e, t) {\n    return \"Transition.Initialize\" === t.ctor ? d(e, t) : \"Transition.ShowSlide\" === t.ctor ? l(e, t) : \"Deactivated\" === t.ctor ? u(e, t) : \"Activated\" === t.ctor ? c(e, t) : [e, h.noEffect];\n  };\n\n  t.bind = function () {\n    return {\n      id: \"transition\",\n      update: g,\n      initialModel: f\n    };\n  };\n}]);\n\n},{}]},{},[1]);\n"],"file":"style.bundle.js"}